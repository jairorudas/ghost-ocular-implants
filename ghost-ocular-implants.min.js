!function(a){a.fn.ghostOcularImplants=function(b){var c=this,d={},e=a(document),f=a("body");d.postlist=[],d.searchstring="",d.searchterms="",d.settings=a.extend({resultBox:"#results",noresults:"<p>No post name or tags were found</p>",template:"<li>{{title}} - tags: [ {{tags}} ] on {{date: MM-DD-YY}}</li>"},b);var g=c.parent("form"),h=c,i=e.find(d.settings.resultBox)||f;return d.getposts=function(){var b={limit:"all",include:"author,tags",filter:"(page:true,page:false)"};a.get(ghost.url.api("posts",b)).done(function(a){d.postlist=a.posts})},d.unique=function(a){for(var b=[],c=0;c<a.length;c+=1)b.indexOf(a[c])==-1&&b.push(a[c]);return b},d.mergeResults=function(a,b){var c=[];return c.push(a),c.concat(b),d.unique(c)[0]},d.emptyResults=function(){i.empty()},d.objresolve=function(a,b){return a.split(".").reduce(function(a,b){return a?a[b]:void 0},b||c)},d.returnTagsList=function(a){var b="",c=a.tags,d=a.tags.length;if(d<=0)b="no tags";else{for(var e=0;e<d;++e)b+=c[e].name+", ";b=b.slice(0,-2)}return b},d.returnPrettyDate=function(a,b){for(var c="",d=b.created_at,e=new Date(d),f=a.split(":")[1].slice(1),g=f.split("-"),h="en-us",i={YY:function(a){return a.getFullYear().toString().substr(2,2)},YYYY:function(a){return a.getFullYear()},MM:function(a){var b=a.getMonth()+1;return b<10&&(b="0"+b),b},MMM:function(a){return a.toLocaleString(h,{month:"long"})},DD:function(a){var b=a.getDate();return b<10&&(b="0"+b),b}},j=0;j<g.length;j++)c+=i[g[j]](e)+"-";return c=c.slice(0,-1)},d.parseTemplate=function(a,b){var c=/\{\{(.*?)\}\}/g;return a.replace(c,function(a){var c=a.slice(2,-2);return"tags"===c?d.returnTagsList(b):c.includes("date")?d.returnPrettyDate(c,b):d.objresolve(c,b)})},d.buildResults=function(a){var b="",c=a.merged.length;if(d.emptyResults(),a.merged.length<=0&&d.searchterms.length>=1)i.html(d.settings.noresults);else for(var e=0;e<c;++e)b=d.parseTemplate(d.settings.template,a.merged[e]),i.append(b)},d.find=function(a){var b={byTitle:[],byTag:[],merged:[]},c=[],e=null,f=null,g=[],h=[];g=a.split(" "),d.searchstring=a,d.searchterms=g,b.byTitle=d.postlist.filter(function(a){return h=a.title.split(" "),f=h.filter(function(a){return g.indexOf(a)>=0}),f.length>0}),b.byTag=d.postlist.filter(function(a){return c=a.tags,e=c.filter(function(a){return g.indexOf(a.name)>=0}),e.length>0}),b.merged=d.mergeResults(b.byTitle,b.byTag),d.buildResults(b)},d.setupSearchInput=function(){g.on("submit",function(a){a.preventDefault()}),h.on("keyup",function(b){var c=a(this),e=c.val();b.preventDefault(),""===e?d.emptyResults():d.find(e)})},d.init=function(){d.getposts(),d.setupSearchInput()},d.init()}}(jQuery);
